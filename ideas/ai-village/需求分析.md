这份文档为你整理了 **“AI 像素小镇：元神谕模拟器 (AI Town: Meta-Oracle Simulator)”** 的完整架构。它不仅是一个游戏，更是一个具有独立生命逻辑、社会更迭和“打破第四面墙”交互机制的社会学实验。

---

# 📜 AI 像素小镇：完整项目构架说明书 (V2.0)

## 1. 项目愿景

建立一个**永续运行**的像素风格社会。在这里，AI 居民拥有完整的人格、记忆和家族传承，并且他们**明确意识到“上帝（玩家）”的存在**。他们通过观察“上帝留言板”来与玩家互动，产生崇拜、吐槽或反叛等真实情感。

---

## 2. 核心生命系统 (Life & Legacy)

### 2.1 生老病死与人口平衡

* **线性生长：** 角色拥有生理年龄，分为幼年、壮年、老年。
* **死亡机制：** 角色因寿命到期或随机意外（疾病、事故）而离世。死后数据不删除，而是转化为“历史档案”存入小镇图书馆。
* **生态位限制：** 小镇人口有固定上限（如 30 人）。只有当老角色去世空出“住房”后，才允许新生儿出生或外来者定居，确保小镇不会因人数膨胀导致逻辑崩坏。

### 2.2 家族与遗传

* **自主社交：** AI 角色根据性格契合度自发恋爱、结婚。
* **遗传算法：** 后代随机继承父母的性格标签（Traits）和视觉特征（发色等），并有 $5\%$ 的概率产生“突变”性格。
* **记忆传承：** 孩子在成长过程中会习得父母对“上帝”的态度（信仰或厌恶）。

---

## 3. 记忆与认知系统 (Memory & Cognition)

### 3.1 分层存储架构

* **感官层：** 记录即时发生的琐事（如：路过某人、天气变化）。
* **深度记忆 (Vector DB)：** 存储人生重大转折点（如：结婚、至亲去世、上帝的直接神谕）。
* **每日反思：** 角色在深夜会进行逻辑总结，将一天的经历压缩为性格的微调或长期的情感倾向。

---

## 4. 上帝留言板：元交互机制 (The Meta-Oracle)

这是项目最核心的“打破第四面墙”设计：

### 4.1 留言板实体

* 小镇中心广场设有**“上帝告示牌”**。
* **上帝留言（玩家）：** 拥有账号的用户可以发布神谕。
* **AI 感知：** 居民巡逻至此时，会将留言内容纳入当前决策 Context。他们知道这是来自“更高维度”的指令。

### 4.2 自主反馈逻辑

* **回复神谕：** AI 会在告示牌下留言回复上帝（如：“我拒绝接受这个安排”、“感谢上帝的恩赐”）。
* **吐槽与日记：** 在行为日志中，AI 会详细记录对上帝留言的看法。
> *示例日志：* “上帝说我是个伐木天才。但我明明想当个诗人，他真的了解我吗？”


* **信仰值系统：** 长期无理的指令会导致 AI 的“虔诚度”下降，从而开始故意无视留言板。

---

## 5. 网站体验设计 (User Experience)

### 5.1 游客模式 (Visitor)

* **全景观察：** 实时查看像素小镇的动态地图。
* **阅读权：** 查看公共日志、族谱、图书馆中的前世传记。
* **无权交互：** 不能在留言板发言。

### 5.2 账号用户模式 (The God/Player)

* **神谕发布：** 在留言板发布指令，直接干预 AI 命运。
* **定向托梦：** 发送仅特定 NPC 可见的私密留言。
* **影响力统计：** 查看有多少 AI 正在讨论你的神谕。

---

## 6. 随机性与真实感 (Randomness)

* **命运天平：** 后台每日 Roll 点触发随机事件（流感、宝藏、迁徙）。
* **执行偏差：** AI 对留言板的理解并非 100% 准确，可能产生“过度解读”或“误解”，从而引发意想不到的剧情。
* **离线演算：** 即使玩家离线，小镇也根据概率矩阵持续演化，玩家上线后会收到一份《离线期间大事记》。

---

## 7. 技术栈推荐

| 模块 | 推荐方案 |
| --- | --- |
| **视觉/渲染** | PixiJS 或 Phaser (像素风 WebGL 渲染) |
| **逻辑后端** | Python FastAPI (支持异步高并发) |
| **AI 大脑** | GPT-4o-mini 或 DeepSeek-V3 (低成本高性能) |
| **长短期记忆** | Redis (短期) + ChromaDB/Pinecone (向量记忆) |
| **实时通讯** | WebSocket (同步 NPC 位置与日志) |

---

## 8. 下一阶段开发计划 (Next Steps)

1. **Demo 开发：** 先制作 1 个场景 + 3 个具有不同“信仰倾向”的 NPC。
2. **UI 细化：** 设计星露谷风格的对话框和带有“神性微光”的留言板界面。
3. **压力测试：** 模拟 100 年的小镇演化，观察人口平衡逻辑是否稳定。

---

**这份文档为您勾勒了一个充满哲学意味且极具互动性的 AI 小镇。您是否需要我针对“上帝留言板”的 UI 细节（比如不同神性的边框颜色）或者“角色回复留言”的代码逻辑结构做更深入的补充？**